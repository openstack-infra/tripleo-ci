---
# zuul.d/build-containers.yaml
# Zuul layout for TripleO Build Containers jobs.

- project-template:
    name: tripleo-build-containers-jobs
    check:
      jobs:
        - tripleo-build-containers-centos-7
        - tripleo-build-containers-centos-7-rocky
        - tripleo-build-containers-centos-7-buildah
    gate:
      queue: tripleo
      jobs:
        - tripleo-build-containers-centos-7
        - tripleo-build-containers-centos-7-rocky
        - tripleo-build-containers-centos-7-buildah

- job:
    name: tripleo-build-containers-centos-7
    parent: tripleo-build-containers-base-with-files
    nodeset: single-centos-7-node
    voting: true

- job:
    name: tripleo-build-containers-centos-7-rocky
    parent: tripleo-build-containers-base-with-files
    nodeset: single-centos-7-node
    override-checkout: stable/rocky
    voting: true
    vars:
      branch_override: stable/rocky

- job:
    name: tripleo-build-containers-centos-7-buildah
    parent: tripleo-build-containers-base-with-files
    voting: true
    nodeset: single-centos-7-node
    branches: ^(?!stable/(pike|queens|rocky)).*$
    vars:
      use_buildah: true
